/*! Snap.js v2.0.0-rc1 */
(function(a,b){"use strict";var c=this,d=function(a){a.element&&(d.utils.extend(d.settings,a),d.cache.vendor=d.utils.vendor(),d.cache.canTransform=d.utils.canTransform(),d.action.drag.listen())},e=d.settings={element:null,dragger:null,disable:"none",addBodyClasses:!0,hyperextensible:!0,resistance:.5,flickThreshold:50,transitionSpeed:.3,easing:"ease",maxPosition:266,minPosition:-266,tapToClose:!0,touchToDrag:!0,clickToDrag:!0,slideIntent:40,minDragDistance:5},f=d.cache={simpleStates:{opening:null,towards:null,hyperExtending:null,halfway:null,flick:null,translation:{absolute:0,relative:0,sinceDirectionChange:0,percentage:0}}};c.Snap=d;var g=d.eventList={},h=d.utils={hasTouch:"ontouchstart"in b.documentElement||a.navigator.msPointerEnabled,eventType:function(a){var b={down:h.hasTouch?"touchstart":e.clickToDrag?"mousedown":"",move:h.hasTouch?"touchmove":e.clickToDrag?"mousemove":"",up:h.hasTouch?"touchend":e.clickToDrag?"mouseup":"",out:h.hasTouch?"touchcancel":e.clickToDrag?"mouseout":""};return b[a]},page:function(a,b){return h.hasTouch&&b.touches.length&&b.touches[0]?b.touches[0]["page"+a]:b["page"+a]},klass:{has:function(a,b){return-1!==a.className.indexOf(b)},add:function(a,b){!h.klass.has(a,b)&&e.addBodyClasses&&(a.className+=" "+b)},remove:function(a,b){h.klass.has(a,b)&&e.addBodyClasses&&(a.className=a.className.replace(b,"").replace(/^\s+|\s+$/g,""))}},dispatchEvent:function(a){return"function"==typeof g[a]?g[a].call():void 0},vendor:function(){var a,c=b.createElement("div"),d="webkit Moz O ms".split(" ");for(a in d)if("undefined"!=typeof c.style[d[a]+"Transition"])return d[a]},transitionCallback:function(){return"Moz"===f.vendor||"ms"===f.vendor?"transitionend":f.vendor+"TransitionEnd"},canTransform:function(){return"undefined"!=typeof e.element.style[f.vendor+"Transform"]},extend:function(a,b){var c;for(c in b)b[c]&&b[c].constructor&&b[c].constructor===Object?(a[c]=a[c]||{},h.extend(a[c],b[c])):a[c]=b[c];return a},angleOfDrag:function(a,b){var c,d;return d=Math.atan2(-(f.startDragY-b),f.startDragX-a),0>d&&(d+=2*Math.PI),c=Math.floor(d*(180/Math.PI)-180),0>c&&c>-180&&(c=360-Math.abs(c)),Math.abs(c)},events:{addEvent:function(a,b,c){return a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):void 0},removeEvent:function(a,b,c){return a.addEventListener?a.removeEventListener(b,c,!1):a.attachEvent?a.detachEvent("on"+b,c):void 0},prevent:function(a){a.preventDefault?a.preventDefault():a.returnValue=!1}},parentUntil:function(a,b){for(var c="string"==typeof b;a.parentNode;){if(c&&a.getAttribute&&a.getAttribute(b))return a;if(!c&&a===b)return a;a=a.parentNode}return null}},i=d.action={translate:{get:{matrix:function(b){if(f.canTransform){var c=a.getComputedStyle(e.element)[f.vendor+"Transform"].match(/\((.*)\)/),d=8;return c?(c=c[1].split(","),16===c.length&&(b+=d),parseInt(c[b],10)):0}return parseInt(e.element.style.left,10)}},easeCallback:function(){e.element.style[f.vendor+"Transition"]="",f.translation=i.translate.get.matrix(4),f.easing=!1,0===f.easingTo&&(h.klass.remove(b.body,"snapjs-right"),h.klass.remove(b.body,"snapjs-left")),h.dispatchEvent("animated"),h.events.removeEvent(e.element,h.transitionCallback(),i.translate.easeCallback)},easeTo:function(a){f.canTransform?(f.easing=!0,f.easingTo=a,e.element.style[f.vendor+"Transition"]="all "+e.transitionSpeed+"s "+e.easing,h.events.addEvent(e.element,h.transitionCallback(),i.translate.easeCallback),i.translate.x(a)):(f.translation=a,i.translate.x(a)),0===a&&(e.element.style[f.vendor+"Transform"]="")},x:function(c){if(!("left"===e.disable&&c>0||"right"===e.disable&&0>c))if(e.hyperextensible||(c===e.maxPosition||c>e.maxPosition?c=e.maxPosition:(c===e.minPosition||c<e.minPosition)&&(c=e.minPosition)),c=parseInt(c,10),isNaN(c)&&(c=0),f.canTransform){var d="translate3d("+c+"px, 0,0)";e.element.style[f.vendor+"Transform"]=d}else e.element.style.width=(a.innerWidth||b.documentElement.clientWidth)+"px",e.element.style.left=c+"px",e.element.style.right=""}},drag:{listen:function(){f.translation=0,f.easing=!1,h.events.addEvent(e.element,h.eventType("down"),i.drag.startDrag),h.events.addEvent(e.element,h.eventType("move"),i.drag.dragging),h.events.addEvent(e.element,h.eventType("up"),i.drag.endDrag)},stopListening:function(){h.events.removeEvent(e.element,h.eventType("down"),i.drag.startDrag),h.events.removeEvent(e.element,h.eventType("move"),i.drag.dragging),h.events.removeEvent(e.element,h.eventType("up"),i.drag.endDrag)},startDrag:function(a){var b=a.target?a.target:a.srcElement,c=h.parentUntil(b,"data-snap-ignore");if(c)return void h.dispatchEvent("ignore");if(e.dragger){var d=h.parentUntil(b,e.dragger);if(!d&&f.translation!==e.minPosition&&f.translation!==e.maxPosition)return}h.dispatchEvent("start"),e.element.style[f.vendor+"Transition"]="",f.isDragging=!0,f.hasIntent=null,f.intentChecked=!1,f.startDragX=h.page("X",a),f.startDragY=h.page("Y",a),f.dragWatchers={current:0,last:0,hold:0,state:""},f.simpleStates={opening:null,towards:null,hyperExtending:null,halfway:null,flick:null,translation:{absolute:0,relative:0,sinceDirectionChange:0,percentage:0}}},dragging:function(a){if(f.isDragging&&e.touchToDrag){var c,d=h.page("X",a),g=h.page("Y",a),j=f.translation,k=i.translate.get.matrix(4),l=d-f.startDragX,m=k>0,n=l;if(f.intentChecked&&!f.hasIntent)return;if(e.addBodyClasses&&(k>0?(h.klass.add(b.body,"snapjs-left"),h.klass.remove(b.body,"snapjs-right")):0>k&&(h.klass.add(b.body,"snapjs-right"),h.klass.remove(b.body,"snapjs-left"))),f.hasIntent===!1||null===f.hasIntent){var o=h.angleOfDrag(d,g),p=o>=0&&o<=e.slideIntent||360>=o&&o>360-e.slideIntent,q=o>=180&&o<=180+e.slideIntent||180>=o&&o>=180-e.slideIntent;f.hasIntent=q||p?!0:!1,f.intentChecked=!0}if(e.minDragDistance>=Math.abs(d-f.startDragX)||f.hasIntent===!1)return;h.events.prevent(a),h.dispatchEvent("drag"),f.dragWatchers.current=d,f.dragWatchers.last>d?("left"!==f.dragWatchers.state&&(f.dragWatchers.state="left",f.dragWatchers.hold=d),f.dragWatchers.last=d):f.dragWatchers.last<d&&("right"!==f.dragWatchers.state&&(f.dragWatchers.state="right",f.dragWatchers.hold=d),f.dragWatchers.last=d),m?(e.maxPosition<k&&(c=(k-e.maxPosition)*e.resistance,n=l-c),f.simpleStates={opening:"left",towards:f.dragWatchers.state,hyperExtending:e.maxPosition<k,halfway:k>e.maxPosition/2,flick:Math.abs(f.dragWatchers.current-f.dragWatchers.hold)>e.flickThreshold,translation:{absolute:k,relative:l,sinceDirectionChange:f.dragWatchers.current-f.dragWatchers.hold,percentage:k/e.maxPosition*100}}):(e.minPosition>k&&(c=(k-e.minPosition)*e.resistance,n=l-c),f.simpleStates={opening:"right",towards:f.dragWatchers.state,hyperExtending:e.minPosition>k,halfway:k<e.minPosition/2,flick:Math.abs(f.dragWatchers.current-f.dragWatchers.hold)>e.flickThreshold,translation:{absolute:k,relative:l,sinceDirectionChange:f.dragWatchers.current-f.dragWatchers.hold,percentage:k/e.minPosition*100}}),i.translate.x(n+j)}},endDrag:function(a){if(f.isDragging){h.dispatchEvent("end");var b=i.translate.get.matrix(4);if(0===f.dragWatchers.current&&0!==b&&e.tapToClose)return h.dispatchEvent("close"),h.events.prevent(a),i.translate.easeTo(0),f.isDragging=!1,void(f.startDragX=0);"left"===f.simpleStates.opening?f.simpleStates.halfway||f.simpleStates.hyperExtending||f.simpleStates.flick?f.simpleStates.flick&&"left"===f.simpleStates.towards?i.translate.easeTo(0):(f.simpleStates.flick&&"right"===f.simpleStates.towards||f.simpleStates.halfway||f.simpleStates.hyperExtending)&&i.translate.easeTo(e.maxPosition):i.translate.easeTo(0):"right"===f.simpleStates.opening&&(f.simpleStates.halfway||f.simpleStates.hyperExtending||f.simpleStates.flick?f.simpleStates.flick&&"right"===f.simpleStates.towards?i.translate.easeTo(0):(f.simpleStates.flick&&"left"===f.simpleStates.towards||f.simpleStates.halfway||f.simpleStates.hyperExtending)&&i.translate.easeTo(e.minPosition):i.translate.easeTo(0)),f.isDragging=!1,f.startDragX=h.page("X",a)}}}};d.prototype.open=function(a){h.dispatchEvent("open"),h.klass.remove(b.body,"snapjs-expand-left"),h.klass.remove(b.body,"snapjs-expand-right"),"left"===a?(f.simpleStates.opening="left",f.simpleStates.towards="right",h.klass.add(b.body,"snapjs-left"),h.klass.remove(b.body,"snapjs-right"),i.translate.easeTo(e.maxPosition)):"right"===a&&(f.simpleStates.opening="right",f.simpleStates.towards="left",h.klass.remove(b.body,"snapjs-left"),h.klass.add(b.body,"snapjs-right"),i.translate.easeTo(e.minPosition))},d.prototype.close=function(){h.dispatchEvent("close"),i.translate.easeTo(0)},d.prototype.expand=function(c){var d=a.innerWidth||b.documentElement.clientWidth;"left"===c?(h.dispatchEvent("expandLeft"),h.klass.add(b.body,"snapjs-expand-left"),h.klass.remove(b.body,"snapjs-expand-right")):(h.dispatchEvent("expandRight"),h.klass.add(b.body,"snapjs-expand-right"),h.klass.remove(b.body,"snapjs-expand-left"),d*=-1),i.translate.easeTo(d)},d.prototype.on=function(a,b){return g[a]=b,this},d.prototype.off=function(a){g[a]&&(g[a]=!1)},d.prototype.enable=function(){h.dispatchEvent("enable"),i.drag.listen()},d.prototype.disable=function(){h.dispatchEvent("disable"),i.drag.stopListening()},d.prototype.settings=function(a){h.extend(e,a)},d.prototype.state=function(){var a,b=i.translate.get.matrix(4);return a=b===e.maxPosition?"left":b===e.minPosition?"right":"closed",{state:a,info:f.simpleStates}}}).call(this,window,document);