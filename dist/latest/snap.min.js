/*! Snap.js v2.0.0-rc1 */
(function(a,b){"use strict";var c={element:null,dragger:null,disable:"none",addBodyClasses:!0,hyperextensible:!0,resistance:.5,flickThreshold:50,transitionSpeed:.3,easing:"ease",maxPosition:266,minPosition:-266,tapToClose:!0,touchToDrag:!0,clickToDrag:!0,slideIntent:40,minDragDistance:5},d={isDragging:!1,simpleStates:{opening:null,towards:null,hyperExtending:null,halfway:null,flick:null,translation:{absolute:0,relative:0,sinceDirectionChange:0,percentage:0}}},e={};e.extend=function(a,b){var c;for(c in b)a[c]=b[c];return a},e.hasClass=function(a,b){return-1!==a.className.indexOf(b)},e.addClass=function(a,b){e.hasClass(a,b)||(a.className+=" "+b)},e.removeClass=function(a,b){e.hasClass(a,b)&&(a.className=a.className.replace(b,"").replace(/^\s+|\s+$/g,""))},e.parentUntil=function(a,b){for(var c="string"==typeof b;a.parentNode;){if(c&&a.getAttribute&&a.getAttribute(b))return a;if(!c&&a===b)return a;a=a.parentNode}return null},e.addEvent=function(a,b,c){return a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):void 0},e.removeEvent=function(a,b,c){return a.addEventListener?a.removeEventListener(b,c,!1):a.attachEvent?a.detachEvent("on"+b,c):void 0},e.preventEvent=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1};var f=function(a){if(this.settings={},this.cache={},this.eventList={},e.extend(this.settings,c),e.extend(this.settings,a),!this.settings.element)throw new Error("Cannot instantiate Snap without a specified element");e.extend(this.cache,d),this.cache.vendor=this.vendor(),this.cache.hasTouch=this.hasTouch(),this.cache.canTransform=this.canTransform(),this.listen()};e.extend(f.prototype,{hasTouch:function(){return"ontouchstart"in b.documentElement||a.navigator.msPointerEnabled},canTransform:function(){return"undefined"!=typeof this.settings.element.style[this.cache.vendor+"Transform"]},eventType:function(a){var b={down:this.cache.hasTouch?"touchstart":this.settings.clickToDrag?"mousedown":"",move:this.cache.hasTouch?"touchmove":this.settings.clickToDrag?"mousemove":"",up:this.cache.hasTouch?"touchend":this.settings.clickToDrag?"mouseup":"",out:this.cache.hasTouch?"touchcancel":this.settings.clickToDrag?"mouseout":""};return b[a]},page:function(a,b){return this.cache.hasTouch&&b.touches.length&&b.touches[0]?b.touches[0]["page"+a]:b["page"+a]},vendor:function(){var a,c=b.createElement("div"),d="webkit Moz O ms".split(" ");for(a in d)if("undefined"!=typeof c.style[d[a]+"Transition"])return d[a]},transitionCallback:function(){return"Moz"===this.cache.vendor||"ms"===this.cache.vendor?"transitionend":this.cache.vendor+"TransitionEnd"}}),e.extend(f.prototype,{dispatchEvent:function(a){return"function"==typeof this.eventList[a]?this.eventList[a].call():void 0}}),e.extend(f.prototype,{matrix:function(b){if(this.cache.canTransform){var c=a.getComputedStyle(this.settings.element)[this.cache.vendor+"Transform"].match(/\((.*)\)/),d=8;return c?(c=c[1].split(","),16===c.length&&(b+=d),parseInt(c[b],10)):0}return parseInt(this.settings.element.style.left,10)},easeTo:function(a){if(this.cache.canTransform){this.cache.easing=!0,this.cache.easingTo=a,this.settings.element.style[this.cache.vendor+"Transition"]="all "+this.settings.transitionSpeed+"s "+this.settings.easing;var c=this,d=function(){c.settings.element.style[c.cache.vendor+"Transition"]="",c.cache.translation=c.matrix(4),c.cache.easing=!1,0===c.cache.easingTo&&c.settings.addBodyClasses&&(e.removeClass(b.body,"snapjs-right"),e.removeClass(b.body,"snapjs-left")),c.dispatchEvent("animated"),e.removeEvent(c.settings.element,c.transitionCallback(),c.easeCallback)};e.addEvent(this.settings.element,this.transitionCallback(),d),this.x(a)}else this.cache.translation=a,this.x(a);0===a&&(this.settings.element.style[this.cache.vendor+"Transform"]="")},x:function(c){if(!("left"===this.settings.disable&&c>0||"right"===this.settings.disable&&0>c))if(this.settings.hyperextensible||(c===this.settings.maxPosition||c>this.settings.maxPosition?c=this.settings.maxPosition:(c===this.settings.minPosition||c<this.settings.minPosition)&&(c=this.settings.minPosition)),c=parseInt(c,10),isNaN(c)&&(c=0),this.cache.canTransform){var d="translate3d("+c+"px,0,0)";this.settings.element.style[this.cache.vendor+"Transform"]=d}else this.settings.element.style.width=(a.innerWidth||b.documentElement.clientWidth)+"px",this.settings.element.style.left=c+"px",this.settings.element.style.right=""},listen:function(){this.cache.translation=0,this.cache.easing=!1,e.addEvent(this.settings.element,this.eventType("down"),this.startDrag),e.addEvent(this.settings.element,this.eventType("move"),this.dragging),e.addEvent(this.settings.element,this.eventType("up"),this.endDrag)},stopListening:function(){e.removeEvent(this.settings.element,this.eventType("down"),this.startDrag),e.removeEvent(this.settings.element,this.eventType("move"),this.dragging),e.removeEvent(this.settings.element,this.eventType("up"),this.endDrag)},angleOfDrag:function(a,b){var c,d;return d=Math.atan2(-(cache.startDragY-b),cache.startDragX-a),0>d&&(d+=2*Math.PI),c=Math.floor(d*(180/Math.PI)-180),0>c&&c>-180&&(c=360-Math.abs(c)),Math.abs(c)},startDrag:function(a){var b=a.target?a.target:a.srcElement,c=e.parentUntil(b,"data-snap-ignore");if(c)return void e.dispatchEvent("ignore");if(this.settings.dragger){var d=e.parentUntil(b,this.settings.dragger);if(!d&&this.cache.translation!==this.settings.minPosition&&this.cache.translation!==this.settings.maxPosition)return}e.dispatchEvent("start"),this.settings.element.style[this.cache.vendor+"Transition"]="",this.cache.isDragging=!0,this.cache.hasIntent=null,this.cache.intentChecked=!1,this.cache.startDragX=this.page("X",a),this.cache.startDragY=this.page("Y",a),this.cache.dragWatchers={current:0,last:0,hold:0,state:""},this.cache.simpleStates={opening:null,towards:null,hyperExtending:null,halfway:null,flick:null,translation:{absolute:0,relative:0,sinceDirectionChange:0,percentage:0}}},dragging:function(a){if(this.cache.isDragging&&this.settings.touchToDrag){var c,d=this.page("X",a),f=this.page("Y",a),g=this.cache.translation,h=this.matrix(4),i=d-this.cache.startDragX,j=h>0,k=i;if(this.cache.intentChecked&&!this.cache.hasIntent)return;if(h>0?this.settings.addBodyClasses&&(e.addClass(b.body,"snapjs-left"),e.removeClass(b.body,"snapjs-right")):0>h&&this.settings.addBodyClasses&&(e.addClass(b.body,"snapjs-right"),e.removeClass(b.body,"snapjs-left")),this.cache.hasIntent===!1||null===this.cache.hasIntent){var l=this.angleOfDrag(d,f),m=l>=0&&l<=this.settings.slideIntent||360>=l&&l>360-this.settings.slideIntent,n=l>=180&&l<=180+this.settings.slideIntent||180>=l&&l>=180-this.settings.slideIntent;this.cache.hasIntent=n||m?!0:!1,this.cache.intentChecked=!0}if(this.settings.minDragDistance>=Math.abs(d-this.cache.startDragX)||this.cache.hasIntent===!1)return;e.preventEvent(a),this.dispatchEvent("drag"),this.cache.dragWatchers.current=d,this.cache.dragWatchers.last>d?("left"!==this.cache.dragWatchers.state&&(this.cache.dragWatchers.state="left",this.cache.dragWatchers.hold=d),this.cache.dragWatchers.last=d):this.cache.dragWatchers.last<d&&("right"!==this.cache.dragWatchers.state&&(this.cache.dragWatchers.state="right",this.cache.dragWatchers.hold=d),this.cache.dragWatchers.last=d),j?(this.settings.maxPosition<h&&(c=(h-this.settings.maxPosition)*settings.resistance,k=i-c),this.cache.simpleStates={opening:"left",towards:this.cache.dragWatchers.state,hyperExtending:this.settings.maxPosition<h,halfway:h>this.settings.maxPosition/2,flick:Math.abs(this.cache.dragWatchers.current-this.cache.dragWatchers.hold)>this.settings.flickThreshold,translation:{absolute:h,relative:i,sinceDirectionChange:this.cache.dragWatchers.current-this.cache.dragWatchers.hold,percentage:h/this.settings.maxPosition*100}}):(this.settings.minPosition>h&&(c=(h-this.settings.minPosition)*this.settings.resistance,k=i-c),this.cache.simpleStates={opening:"right",towards:this.cache.dragWatchers.state,hyperExtending:this.settings.minPosition>h,halfway:h<this.settings.minPosition/2,flick:Math.abs(this.cache.dragWatchers.current-this.cache.dragWatchers.hold)>this.settings.flickThreshold,translation:{absolute:h,relative:i,sinceDirectionChange:this.cache.dragWatchers.current-this.cache.dragWatchers.hold,percentage:h/this.settings.minPosition*100}}),action.translate.x(k+g)}},endDrag:function(a){if(this.cache.isDragging){e.dispatchEvent("end");var b=this.matrix(4);if(0===this.cache.dragWatchers.current&&0!==b&&this.settings.tapToClose)return this.dispatchEvent("close"),this.prevent(a),this.easeTo(0),this.cache.isDragging=!1,void(this.cache.startDragX=0);"left"===this.cache.simpleStates.opening?this.cache.simpleStates.halfway||this.cache.simpleStates.hyperExtending||this.cache.simpleStates.flick?this.cache.simpleStates.flick&&"left"===this.cache.simpleStates.towards?this.easeTo(0):(this.cache.simpleStates.flick&&"right"===this.cache.simpleStates.towards||this.cache.simpleStates.halfway||this.cache.simpleStates.hyperExtending)&&this.easeTo(settings.maxPosition):this.easeTo(0):"right"===this.cache.simpleStates.opening&&(this.cache.simpleStates.halfway||this.cache.simpleStates.hyperExtending||this.cache.simpleStates.flick?this.cache.simpleStates.flick&&"right"===this.cache.simpleStates.towards?this.easeTo(0):(this.cache.simpleStates.flick&&"left"===this.cache.simpleStates.towards||this.cache.simpleStates.halfway||this.cache.simpleStates.hyperExtending)&&this.easeTo(settings.minPosition):this.easeTo(0)),this.cache.isDragging=!1,this.cache.startDragX=e.page("X",a)}}}),e.extend(f.prototype,{open:function(a){this.dispatchEvent("open"),this.settings.addBodyClasses&&(e.removeClass(b.body,"snapjs-expand-left"),e.removeClass(b.body,"snapjs-expand-right")),"left"===a?(this.cache.simpleStates.opening="left",this.cache.simpleStates.towards="right",this.settings.addBodyClasses&&(e.addClass(b.body,"snapjs-left"),e.removeClass(b.body,"snapjs-right")),this.easeTo(this.settings.maxPosition)):"right"===a&&(this.cache.simpleStates.opening="right",this.cache.simpleStates.towards="left",this.settings.addBodyClasses&&(e.addClass(b.body,"snapjs-right"),e.removeClass(b.body,"snapjs-left")),this.easeTo(this.settings.minPosition))},close:function(){this.dispatchEvent("close"),this.easeTo(0)},expand:function(c){var d=a.innerWidth||b.documentElement.clientWidth;"left"===c?(this.dispatchEvent("expandLeft"),this.settings.addBodyClasses&&(e.addClass(b.body,"snapjs-expand-left"),e.removeClass(b.body,"snapjs-expand-right"))):(this.dispatchEvent("expandRight"),this.settings.addBodyClasses&&(e.addClass(b.body,"snapjs-expand-right"),e.removeClass(b.body,"snapjs-expand-left")),d*=-1),this.easeTo(d)},on:function(a,b){return this.eventList[a]=b,this},off:function(a){this.eventList[a]&&(this.eventList[a]=!1)},enable:function(){this.dispatchEvent("enable"),this.listen()},disable:function(){this.dispatchEvent("disable"),this.stopListening()},settings:function(a){return a?void e.extend(this.settings,a):this.settings},state:function(){var a,b=this.matrix(4);return a=b===this.settings.maxPosition?"left":b===this.settings.minPosition?"right":"closed",{state:a,info:this.cache.simpleStates}}}),a.Snap=f}).call(this,window,document);